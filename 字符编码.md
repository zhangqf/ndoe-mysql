#字符编码

#字符集概述
 >简单地说字符集就是一套文字符号及其编码、比较规则的集合。1960 年代初期，美国
    标准化组织 ANSI 发布了第一个计算机字符集──ASCII（American Standard Code for
    Information Interchange），后来进一步变成了国际标准 ISO-646。这个字符集采用 7 位编码，
    定义了包括大小写英文字母、阿拉伯数字和标点符号，以及 33 个控制符号等。虽然现在看
    来，这个美式的字符集很简单，包括的符号也很少，但直到今天它依然是计算机世界里奠基
    性的标准，其后制定的各种字符集基本都兼容 ASCII 字符集。
    自 ASCII 之后，为了处理不同的文字，各大计算机公司、各国政府、标准化组织等先后
    发明了几百种字符集，如大家熟悉的 ISO-8859 系列、GB2312-80、GBK、BIG5 等。这些五花
    八门的字符集，从收录的字符到编码规则各不相同，给计算机软件开发和移植带来了很大困
    难。一个软件要在使用不同文字的国家或地区发布，必须进行本地化开发！基于这个原因，
    统一字符编码，成了 1980 年代计算机业的迫切需要和普遍共识。
#Unicode简述
>为了统一字符编码，国际标准化组织ISO（International Organization for Standardization）的一
 些成员国于1984年发起制定新的国际字符集标准，以容纳全世界各种语言文字和符号。这个
 标准最后叫做“Universal Multiple-Octet Coded Character Set”，简称UCS，标准编号则定为
 ISO-10646。ISO-10646标准采用4字节（32bit）编码，因此简称UCS-4。具体编码规则是：将
 代码空间划分为组（group）、面（plane）、行（row）和格（ceil）；第1个字节代表组（group），
 第2个字节代表面（plane），第3个字节代表行（row），第4个字节代表格（ceil），并规定字
 符编码的第32位必须为0，且每个面（plane）的最后两个码位FFFEh和FFFFh保留不用；因此，
 ISO-1064共有128个群组（0～0x7F），每个群组有256个字面（00～0xFF），每个字面有256行
 （00～0xFF），每行包括256格（0～0xFF），共有256 * 128 = 32,768 个字面，每个字面有256×256
 －2＝65,534个码位，合计65534×32768＝2,147,418,112 个码位。
>
> ISO-10646发布以后，遭到了部分美国计算机公司的反对。1988年Xerox公司提议制定新的以
 16位编码的统一字符集Unicode，并联合Apple、IBM、DEC、Sun、Microsoft、Novell等公司成
 立Unicode协会（The Unicode Consortium），并成立Unicode技术委员会（Unicode Technical
 Committee），专门负责Unicode文字的搜集、整理和编码，并于1991年推出了Unicode 1.0。
 都是为了解决字符编码统一问题，ISO和Unicode协会却推出了两个不同的编码标准，这显然
 是不利的。后来，大家都认识到了这一点，经过双方谈判，1991年10月达成协议，ISO将Unicode
 编码并入ISO-10646的0组0字面，叫作基本多语言文字面（Basic Multi-lingual Plane, BMP），
 共有65,534个码位，并根据不同用途分为若干区域。除BMP外的32,767个字面又分为辅助字
 面（supplementary planes）和专用字面（private use planes）两部分，辅助字面用以收录
 ISO-10646后续搜集的各国文字，专用字面供使用者自定义收录ISO-10646未收录的文字符号。
 其实，大部分用户只使用BMP字面就足够了，早期的ISO-10646-1标准也只要求实现BMP字面，
 这样只需要2字节来编码就足够了，Unicode也正是这么做的，这叫作ISO-10646编码的基本
 面形式，简称为UCS-2编码，UCS-2编码转换成UCS-4编码也很容易，只要在前面加两个取值
 为0的字节即可。
>
> ISO-10646的编码空间足以容纳人类从古至今使用过的所有文字和符号，但其实许多文字符
 号都已经很少使用了，超过99%的在用文字符号都编入了BMP，因此，绝大部分情况下，
 Unicode的双字节编码方式都能满足需求，而这种双字节编码方式比起ISO-10646的4字节原
 始编码来说，在节省内存和处理时间上都具有优势，这也是Unicode编码方式更流行的原因。
 但如果万一要使用ISO-10646 BMP字面以外的文字怎么办呢？Unicode提出了名为UTF-16或
 代理法（surrogates）的解决方案，UTF是UCS/Unicode Transformation Format 的缩写。UTF-16
 的解决办法是：对BMP字面的编码保持二字节不变，对其他字面的文字按一定规则将其32
 位编码转换为两个16位的Unicode编码，其两个字节的取值范围分别限定为0xD800～0xDBFF
 和0xDC00～0xDFFF，因此，UTF-16共有（4×256）×（4×256）＝1048576个码位。
 虽然UTF-16解决了ISO-10646除BMP外第1至第15字面的编码问题，但当时的计算机和网络世
 界还是ASCII的天下，只能处理单字节数据流，UTF-16在离开Unicode环境后，在传输和处理
 中都存在问题。于是Unicode又提出了名为UTF-8的解决方案，UTF-8按一定规则将一个
 ISO-10646或Unicode字元码转换成1至4个字节的编码，其中将ASCII码（0～0x7F）转换成单
 字节编码，也就是严格兼容ASCII字符集；UTF-8的2字节编码，用以转换ISO-10646标准
 0x0080～0x07FF的UCS-4原始码；UTF-8的3字节编码，用以转换ISO-10646标准 0x0800～
 0xFFFF的UCS-4原始码；UTF-8的4字节编码，用以转换ISO-10646标准 0x00010000～0001FFFF
 的UCS-4原始码。
>
> 上述各种编码方式，看起来有点让人迷惑。其实，ISO-10646只是给每一个文字符号分配了
 一个4字节无符号整数编号（UCS-4），并未规定在计算机中如何去表示这个无符号整数编号。
 UTF-16和UTF-8就是其两种变通表示方式。
>
> ISO-10646与Unicode统一以后，两个组织虽然都继续发布各自的标准，但二者之间是一致的。
 由于Unicode最早投入应用，其编码方式更加普及，因此，许多人都知道Unicode，但对ISO-
 10646却了解不多。但由于二者是一致的，因此，区分ISO-10646和Unicode的意义也就不大
 了。现在，大家说Unicode和ISO-10646，一般指的是同一个东西，只是Unicode更直接、更普
 及罢了。

>


|字符集 | 是否定长|编码方式|其他说明|
|:---:|:---:|:---:|:---|
|ACSII|是|单字节7位|最早的奠基性字符集|
|ISO-8895-1 &#124; LATIN1|是|单字节8位编码|西欧字符集，经常被一些程序用来转码|
|GB2312-80|是|双字节编码|早期标准，不推荐再使用|
|GBK|是|双字节编码|虽然不是国标，支持的系统不少|
|GB18030|否|2字节或4字节编码|开始有一些支持，但是数据库支持的还少见|
|UTF-32|是|4字节编码|USC-4 原始编码，目前采用很少|
|USC-2|是|2字节|windows2000内部用USC-2|
|UTF-16|否|2字节或4字节编码|Java和windows XP/NT等内部使用UTF-16|
|UTF-8|否|1至4字节编码|互联网和UNIX/Linux广泛支持的Unicode字符集；MySQLServer也使用UTF-8|

>（1）满足应用支持语言的需求，如果应用要处理各种各样的文字，或者将发布到使用
 不同语言的国家或地区，就应该选择 Unicode 字符集。对 MySQL 来说，目前就是 UTF-8。
>
>（2）如果应用中涉及已有数据的导入，就要充分考虑数据库字符集对已有数据的兼容
 性。假如已有数据是 GBK 文字，如果选择 GB2312-80 为数据库字符集，就很可能出现某些
 文字无法正确导入的问题。
>
>（3）如果数据库只需要支持一般中文，数据量很大，性能要求也很高，那就应该选择
 双字节定长编码的中文字符集，比如 GBK。因为，相对于 UTF-8 而言，GBK 比较“小”，每
 个汉字只占2个字节，而UTF-8汉字编码需要3个字节，这样可以减少磁盘I/O、数据库cache，
 以及网络传输的时间，从而提高性能。相反，如果应用主要处理英文字符，仅有少量汉字数
 据，那么选择 UTF-8 更好，因为 GBK、UCS-2、UTF-16 的西文字符编码都是 2 个字节,会造成
 很大不必要的开销。
>
>（4）如果数据库需要做大量的字符运算，如比较、排序等，选择定长字符集可能更好，
 因为定长字符集的处理速度要比变长字符集的处理速度快。
>
>（5）如果所有客户端程序都支持相同的字符集，应该优先选择该字符集作为数据库字
 符集。这样可以避免因字符集转换带来的性能开销和数据损失。

### MySQL 的字符集包括字符集和校对规则
    字符集：用来定义Mysql存储字符串的方式
    校对规则：定义了比较字符串的方式
    有4个级别的默认设置：服务器级、数据库级、表级和字段及。


### 字符集的修改步骤
    字符集不能直接通过alter database character set *** 或者 alter table tablename character set *** 修改，这两个命令都没有
    更新已有记录的字符集，而只是对新创建的表或者记录生效。已有记录的字符集调整，需要先将数据导出，经过适当的调整重新导入后才可完成
    
> 导出表结构：
>
> mysqldump -uroot -p --default-character-set=gbk -d databasename>createtab.sql
>
> --default-character-set=gbk 表示设置以什么字符集连接，-d表示只导出表结构。不导出数据。
>
>  手工修改导出表结构定义中的字符集为新的字符集
>
>mysqldump -uroot -p -quick -no-create-info --extended-insert --default-character-set = latin1 databasename>data.sql
>
>--quick 该选项用于存储大的表。它强制mysqldump从服务器一次一行地检索表中的行而不是检索所有的行，并在输出前将它缓存到内存中。
>
>--extende-insert 使用包括几个VALUES列表的多行insert语法。这样使转储文件更小，重载文件时可以加速插入
>
>--no-create-info 不写重新创建每个转储表的crate table语句。
>
>--default-character-set=latin1 按照原有的字符集导出所有数据，这样导出的文件中，所有中文都是可见的，不会保存成乱码。
